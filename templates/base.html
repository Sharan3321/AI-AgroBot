<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>{{ title|default("AI-AgroBot Pro v2") }}</title>
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="body-pattern"></div>
  <header class="topbar">
    <div class="brand">
      <img src="{{ url_for('static', filename='bot.png') }}" class="logo" alt="bot">
      <div>
        <h1>AI-AgroBot</h1>
        <small>Pocket agronomist</small>
      </div>
    </div>
    <nav class="nav">
      <a href="{{ url_for('chat') }}">ğŸ’¬ Chat</a>
      {% if current_user.is_authenticated %}
        <a href="{{ url_for('profile') }}">ğŸ‘¤ Profile</a>
        {% if current_user.role == 'admin' %}<a href="{{ url_for('admin_dashboard') }}">âš™ï¸ Admin</a>{% endif %}
        <a href="{{ url_for('logout') }}">ğŸšª Logout</a>
      {% else %}
        <a href="{{ url_for('login') }}">ğŸ” Login</a>
        <a href="{{ url_for('register') }}">ğŸŒ± Register</a>
      {% endif %}
    </nav>
  </header>
  <main class="main">
    {% with msgs = get_flashed_messages(with_categories=true) %}
      {% if msgs %}
        <div style="max-width: 800px; margin: 20px auto;">
          {% for cat, msg in msgs %}
            <div style="padding: 12px 16px; border-radius: 10px; margin-bottom: 10px; background: {% if cat == 'success' %}linear-gradient(135deg, #d4edda, #c3e6cb); color: #155724; border: 2px solid #28a745{% elif cat == 'danger' %}linear-gradient(135deg, #f8d7da, #f5c6cb); color: #721c24; border: 2px solid #dc3545{% else %}linear-gradient(135deg, #fff3cd, #ffeaa7); color: #856404; border: 2px solid #ffc107{% endif %}; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
              {{ msg }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </main>
  <footer class="footer">
    <p style="color: var(--muted);">Â© 2025 AI-AgroBot - ğŸŒ¾ Your Smart Farming Partner</p>
  </footer>
  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>